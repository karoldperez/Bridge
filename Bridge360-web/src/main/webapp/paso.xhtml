<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
        id="actividadIngresarCompall"
>
<h:head id="cargueTestHead">
    <title id="paso">
    </title>
</h:head>
<ui:composition  template="/template/templateGeneral2.xhtml">
    <h:panelGroup id="contenidoUser" layout="block"></h:panelGroup>
    <ui:define name="labels">
        <h:form style="display: none;" id="myform" prependId="false" class="contenido" enctype="multipart/form-data">
        <h:inputText id="idUser" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.idUser}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="min" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.min}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="channelTypeCode" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.channelTypeCode}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="documentType" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.documentType}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="documentNumber" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.documentNumber}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="source" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.source}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="idHeader" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.idHeader}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="idTurn" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.idTurn}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="account" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.account}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="urlReturn" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.urlReturn}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="idFlow" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.idFlow}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
        <h:inputText id="idFlow" autocomplete="off" style="display: none;"
                     value="#{PasoIMEI.addressId}" rendered="true" >
            <f:ajax execute="@this" />
        </h:inputText>
            <h:commandButton id="trigerframe" action="#{PasoIMEI.renderIframe()}" style="display: none;">
            </h:commandButton>
            <h:commandButton id="renderframe" style="display: none;">
                <f:ajax render=":iframe-holder" />
            </h:commandButton>
        </h:form>
        <h:panelGroup id="iframe-holder">
            <iframe id="appImei"  src="#{PasoIMEI.urlDestiny}"
                    style="display: block; border: none; height: 100vh; width: 100vw;">
            </iframe>
        </h:panelGroup>
        <script type="text/javascript">
            /*function sesion() {
                var idFlow = document.getElementById("idFlow");
                var trigger = document.getElementById("trigerframe");
                var renderF = document.getElementById("renderframe");
                var valId = idFlow.value ;
                if( valId.localeCompare("") == 0){
                    var url = window.location.href.split("?");
                    var flow = url[url.length -1];
                    idFlow.click();
                    idFlow.value = flow;
                    trigger.click();
                    renderF.click();
                }
                setTimeout(function () {
                    sendDataMen();
                    sesion();
                }, 10000);
            }*/

            window.onload = sesion;

/*            function sendDataMen() {
                var idUser = document.getElementById("idUser");
                var min = document.getElementById("min");
                var channelTypeCode = document.getElementById("channelTypeCode");
                var documentType = document.getElementById("documentType");
                var documentNumber = document.getElementById("documentNumber");
                var source = document.getElementById("source");
                var idHeader = document.getElementById("idHeader");
                var idTurn = document.getElementById("idTurn");
                var account = document.getElementById("account");
                var urlReturn = document.getElementById("urlReturn");

                var frameImei = document.getElementById('appImei');
                var frameImeiW = frameImei.contentWindow;
                var frameImeiSrc = frameImei.src;

                var mensaje =
                    "idUser:" + idUser.value +
                    ", min:" + min.value +
                    ", channelTypeCode:" + channelTypeCode.value +
                    ", documentType:" + documentType.value +
                    ", documentNumber:" + documentNumber.value +
                    ", source:" + source.value +
                    ", idHeader:" + idHeader.value +
                    ", idTurn:" + idTurn.value +
                    ", account:" + account.value +
                    ", urlReturn:" + urlReturn.value;
                frameImeiW.postMessage(mensaje, frameImeiSrc);
            }*/
        </script>
    </ui:define>
</ui:composition>
</html>
